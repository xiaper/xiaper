var cookieUtils = {}; !
    function(a) {
        var b = {
                gaMedium: "input#gaMedium",
                gaSource: "input#gaSource",
                optimizelyId: "input#Opti_ID",
                optimizelyVariationId: "input#Opti_Variation_ID",
                trialExtraOptimizelyId: "input#trial_extras\\[Opti_ID\\]",
                trialExtraOptimizelyVariationId: "input#trial_extras\\[Opti_Variation_ID\\]"
            },
            c = !1;
        cookieUtils.gauge = function() {
            var b, d = (new Date).getTime(),
                e = document.referrer;
            if (a.cookie("flight")) {
                if (b = JSON.parse(String(a.cookie("flight"))), c) return b;
                d > b.last_touch_timestamp + 18e5 && (b.visits++, b.last_touch_timestamp = d),
                e.indexOf("www.zd") === -1 && e.indexOf("accounts.google") === -1 && location.href.indexOf("/register") === -1 && (b.last_landing_page = location.href, b.last_referrer = document.referrer, b.last_touch_timestamp = d),
                    b.time_on_site = Math.round((d - b.last_touch_timestamp) / 1e3),
                    b.total_time_on_site += b.time_on_site,
                    b.page_views = ++b.page_views
            } else e = e.indexOf("www.zd") === -1 ? e: "",
                b = {
                    first_touch_timestamp: d,
                    last_touch_timestamp: d,
                    first_referrer: e,
                    last_referrer: "none",
                    first_landing_page: location.href,
                    last_landing_page: "none",
                    time_on_site: 0,
                    total_time_on_site: 0,
                    page_views: 1,
                    visits: 1,
                    trials: 0,
                    domain: "none"
                };
            return cookieUtils.setFlightCookie(b),
                c = !0,
                b
        },
            cookieUtils.setFlightCookie = function(b) {
                var c = location.hostname.substr(location.hostname.indexOf(".") + 1);
                a.cookie("flight", JSON.stringify(b), {
                    expires: 730,
                    path: "/",
                    domain: c
                })
            },
            cookieUtils.searchForCookie = function(a) {
                var b = "";
                if (!document.cookie.length) return b;
                var c = document.cookie.indexOf(a + "=");
                if (c != -1) {
                    c = c + a.length + 1;
                    var d = document.cookie.indexOf(";", c);
                    d == -1 && (d = document.cookie.length),
                        b = unescape(document.cookie.substring(c, d))
                }
                return b
            },
            cookieUtils.parseCookies = function() {
                var c = "",
                    d = "",
                    e = "",
                    f = "",
                    g = "";
                if (e = cookieUtils.searchForCookie("__utmz"), f = cookieUtils.searchForCookie("optimizelyEndUserId"), g = cookieUtils.searchForCookie("optimizelyBuckets"), e) {
                    var h = e.split(".");
                    if (h.length >= 4) {
                        var j = h[4].split("|");
                        for (i = 0; i < j.length; i++) {
                            var k = j[i];
                            k.indexOf("utmcsr=") > -1 && (c = k.substring(k.indexOf("=") + 1)),
                            k.indexOf("utmcmd=") > -1 && (d = k.substring(k.indexOf("=") + 1))
                        }
                        a(b.gaMedium).val(d),
                            a(b.gaSource).val(c)
                    }
                }
                "" !== f && (a(b.optimizelyId).val(f), a(b.trialExtraOptimizelyId).val(f)),
                "" !== g && (a(b.optimizelyVariationId).val(g), a(b.trialExtraOptimizelyVariationId).val(g))
            }
    } (jQuery);